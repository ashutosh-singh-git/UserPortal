<div ng-cloak ng-controller="ProfileController">
    <div class="col-md-12">
        <div class="page-header"><h2>My Profiles</h2></div>
        <div class="panel panel-group" id="accordion">
            <div class="panel">
                <div class="col-md-4"><span><strong>ProfileName</strong></span></div>
                <div class="col-md-4"><span><strong>DefaultProfile</strong></span></div>
                <div class="col-md-4"><span><strong>Action</strong></span></div>
                <br>
            </div>
            <div class="panel panel-default" ng-repeat="x in profiles">
                <div class="panel panel-primary panel-body">
                    <div class="col-md-4"><span>Profile{{x.profileId}}</span></div>
                    <div class="col-md-4">
                        <toggle-switch ng-model="x.default" is-disabled="true" on-change="clickHandler(x.profileId)"
                                       class="switch-mini"></toggle-switch>
                    </div>
                    <div class="col-md-4"><a class="btn btn-xs btn-info" data-toggle="collapse" data-parent="#accordion"
                                             href="#myButton{{$index}}"
                                             ng-click="getUserDetails(x.profileId)">Details</a>
                    </div>
                    <div ng-if="x.default == true" ng-init="setProfile(x.profileId)"></div>
                </div>
                <form id="myButton{{$index}}"
                      class="profile form-horizontal panel panel-body collapse panel-success"
                      ng-submit="updateProfile(x.profileId)" role="form">
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">First Name</label>
                            <div class="col-lg-4">
                                <input ng-disabled="!isEdit && dataPresent" ng-model="selectedUser.firstName"
                                       class="form-control" type="text" value="{{selectedUser.firstName}}">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Last Name</label>
                            <div class="col-lg-4">
                                <input ng-disabled="!isEdit && dataPresent" ng-model="selectedUser.lastName"
                                       class="form-control" type="text" value="{{selectedUser.lastName}}">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Email</label>
                            <div class="col-lg-4">
                                <input ng-disabled="true" ng-model="selectedUser.email"
                                       class="form-control" type="email" value="{{selectedUser.email}}">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Gender</label>
                            <div class="col-lg-4">
                                <select ng-disabled="!isEdit && dataPresent" ng-model="selectedUser.gender"
                                        class="form-control">
                                    <option value="Male">Male</option>
                                    <option value="Female" selected="selected">Female</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Address</label>
                            <div class="col-lg-4">
                        <textarea ng-disabled="!isEdit && dataPresent" ng-model="selectedUser.address"
                                  class="form-control" type="text" value="{{selectedUser.address}}"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Pincode</label>
                            <div class="col-lg-4">
                                <input ng-disabled="!isEdit && dataPresent" ng-model="selectedUser.pincode"
                                       class="form-control" type="number" value="{{selectedUser.pincode}}">
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Mobile No</label>
                            <div class="col-lg-4">
                                <input ng-disabled="!isEdit && dataPresent" ng-model="selectedUser.mobileNo"
                                       class="form-control" type="number" value="{{selectedUser.mobileNo}}">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Birth Date</label>
                            <div class="col-lg-4">
                                <input ng-disabled="!isEdit && dataPresent"
                                       ng-model="selectedUser.birthDate"
                                       class="form-control" type="date"
                                       value="{{selectedUser.birthDate | date : 'yyyy-MM-dd'}}">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Qualification</label>
                            <div class="col-lg-4">
                                <select ng-disabled="!isEdit && dataPresent" ng-model="selectedUser.qualification"
                                        class="form-control">
                                    <option value="Diploma">Diploma</option>
                                    <option value="Graduate">Graduate</option>
                                    <option value="Post Graduate" selected="selected">Post Graduate</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 text-right">
                        <input class="btn btn-sm btn-warning" ng-click="isEdit = !isEdit" type="button"
                               ng-value="!isEdit ? 'Edit' : 'Cancel'">
                        <input class="btn btn-sm btn-info" ng-show="isEdit" type="submit" value="Update">
                    </div>
                </form>
            </div>
            <br>
            <hr>
            <div class="panel">
                <div class="panel panel-heading"><a style="text-decoration: none" class="lead" data-toggle="collapse"
                                                    data-parent="#accordion" href="#addprofile">Click Here to Add More
                    Profiles
                </a></div>
                <form id="addprofile" class="form-horizontal panel panel-body collapse panel-success"
                      ng-submit="createProfile()" role="form">
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">First Name</label>
                            <div class="col-lg-4">
                                <input ng-model="selectedUser.firstName" class="form-control" type="text">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Last Name</label>
                            <div class="col-lg-4">
                                <input ng-model="selectedUser.lastName" class="form-control" type="text">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Email</label>
                            <div class="col-lg-4">
                                <input ng-model="selectedUser.email" class="form-control" type="email">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Gender</label>
                            <div class="col-lg-4">
                                <select ng-model="selectedUser.gender" class="form-control">
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Address</label>
                            <div class="col-lg-4">
                                <textarea ng-model="selectedUser.address" class="form-control" type="text"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Pincode</label>
                            <div class="col-lg-4">
                                <input ng-model="selectedUser.pincode" class="form-control" type="number">
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Mobile No</label>
                            <div class="col-lg-4">
                                <input ng-model="selectedUser.mobileNo"
                                       class="form-control" type="number">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Birth Date</label>
                            <div class="col-lg-4">
                                <input ng-model="selectedUser.birthDate" class="form-control" type="date">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label class="col-lg-2 control-label">Qualification</label>
                            <div class="col-lg-4">
                                <select ng-model="selectedUser.qualification" class="form-control">
                                    <option value="Diploma">Diploma</option>
                                    <option value="Graduate">Graduate</option>
                                    <option value="Post Graduate">Post Graduate</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 text-right">
                        <input class="btn btn-sm btn-info" type="submit" value="Create">
                    </div>
                </form>
            </div>
            <div class="modal fade" id="myModal" role="dialog">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Save</h4>
                        </div>
                        <div class="modal-body">
                            <p>Do you want to set this profile as Default?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-default" data-dismiss="modal"
                                    ng-click="changeDefaultProfile()">Yes
                            </button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>